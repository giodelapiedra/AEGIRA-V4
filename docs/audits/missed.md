as senior softwar eengineer Option A is the cleanest for longitudinal integrity and it reduces false “missed” signals. Here’s exactly how to implement Option A so Gio can build it without ambiguity. Option A Spec Principle Only create a check-in schedule instance when a check-in is expected. If the worker is off shift, there is no check-in to miss. So “off shift” should produce: no check-in schedule instance an auditable shift-status event (so history is explainable later) What the System Should Record (Off-Shift) 1) Immutable shift-status event Create an event in your event_log: event_type: shift_not_scheduled (or worker_off_shift) occurred_at: the start of the shift/day boundary (consistent rule) person_id: stable worker ID context_snapshot_id: role/site/shift pattern at that time (if available) raw_payload includes: reason_code: one of: rostered_off annual_leave sick_leave public_holiday site_shutdown admin_override source: where the decision came from: roster_system worker_declared supervisor_declared admin_override expected_check_in: false That’s it. Simple, auditable, time-aware. How “Missed Check-In” Should Work Under Option A Only create check_in_schedule_instance if expected At scheduling time: If expected → create check_in_schedule_instance If not expected → do nothing (except log shift-status event above) Only create check_in_missed if schedule instance exists At window close: If a schedule instance exists and no submission exists → log check_in_missed If no schedule instance exists → do nothing (cannot miss what wasn’t expected) Why This Is Better Than “Exclude Flags” No accidental “misses” on off days Your engagement metrics aren’t polluted Risk signals become cleaner Audit is still perfect (because off-shift is explicitly logged) Copy/Paste Message to Send Gio Let’s go with Option A: only create check-in schedule instances when a check-in is expected. If the worker is off shift, we should not create a schedule instance (so there’s nothing to miss). But we still need auditability, so we log a separate immutable event like: event_type = shift_not_scheduled (or worker_off_shift) with occurred_at, person_id, and raw_payload including reason_code (rostered_off / annual_leave / sick_leave / public_holiday / site_shutdown / admin_override) + source. Then “missed check-in” only exists when a schedule instance exists and the window closes with no submission. One Extra Guardrail (worth adding) If a worker submits a check-in on an off-shift day (rare but possible), you have two valid approaches: Allow it, but log: check_in_unscheduled_submission Block it at UI level I’d recommend #1 for data richness (and it’s safer). If you want, I can also write the exact pseudocode / rules engine logic for: creating schedule instances evaluating missed at window end handling late submissions handling unscheduled submissions